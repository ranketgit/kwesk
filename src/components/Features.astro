---
// Features.astro
interface Feature {
  icon: string;
  title: string;
  description: string;
}

interface Props {
  features?: Feature[];
}

const { features = [
  {
    icon: "quality",
    title: "Qualité",
    description: "Les chaises KWESK sont conformes aux normes BIFMA et EN1335-1-2-3."
  },
  {
    icon: "shipping",
    title: "Livraison",
    description: "Livraison mondiale via notre réseau d'affiliés."
  },
  {
    icon: "warranty",
    title: "Garantie",
    description: "Les chaises KWESK bénéficient d'une garantie d'au moins 5 ans."
  },
  {
    icon: "service",
    title: "Service Après-Vente",
    description: "Réparation, maintenance et rénovation via notre réseau d'affiliés."
  }
]} = Astro.props;
---

<section class="features-section py-20 bg-white">
  <div class="max-w-6xl mx-auto px-8 lg:px-16">
    <div class="grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12">
      
      {features.map((feature, i) => (
        <div class="feature-item text-center" style={`--i: ${i}`}>
          <div class="feature-icon w-12 h-12 mx-auto mb-4" style="color: #8b8b4b;">
            {feature.icon === "quality" && (
              <svg viewBox="0 0 24 24" fill="currentColor" class="w-full h-full">
                <path d="M12 2L9.19 8.63L2 9.24L7.46 13.97L5.82 21L12 17.27L18.18 21L16.54 13.97L22 9.24L14.81 8.63L12 2Z"/>
              </svg>
            )}
            {feature.icon === "shipping" && (
              <svg viewBox="0 0 24 24" fill="currentColor" class="w-full h-full">
                <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
              </svg>
            )}
            {feature.icon === "warranty" && (
              <svg viewBox="0 0 24 24" fill="currentColor" class="w-full h-full">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
            )}
            {feature.icon === "service" && (
              <svg viewBox="0 0 24 24" fill="currentColor" class="w-full h-full">
                <path d="M22.7 19l-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4z"/>
              </svg>
            )}
          </div>
          <h3 class="feature-title text-lg font-semibold text-stone-900 mb-2">{feature.title}</h3>
          <p class="feature-desc text-sm text-stone-500 leading-relaxed">{feature.description}</p>
        </div>
      ))}

    </div>
  </div>
</section>

<style>
  .feature-item {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.6s cubic-bezier(0.16, 1, 0.3, 1),
                transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    transition-delay: calc(var(--i) * 100ms);
  }

  .features-section.in-view .feature-item {
    opacity: 1;
    transform: translateY(0);
  }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('in-view');
        }
      });
    },
    { threshold: 0.3 }
  );

  document.querySelectorAll('.features-section').forEach((section) => {
    observer.observe(section);
  });
</script>